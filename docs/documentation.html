---

title: Model documentation


keywords: fastai
sidebar: home_sidebar

summary: "Functions to jumpstat and facilitate model documentation"
description: "Functions to jumpstat and facilitate model documentation"
nb_path: "00_documentation.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_documentation.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Each user has a specific documentation need, ranging from simply logging the model training to a more complex description of the model pipeline with a discusson of the model outcomes. <code>gingado</code> addresses this variety of needs by offering a class of objects, "Documenters", that facilitate model documentation. A base class facilitates the creation of  generic ways to document models, and <code>gingado</code> includes off-the-shelf one specific model documentation template as described below.</p>
<p>The model documentation is performed by Documenters, objects that subclass from the base class <a href="/gingado/documentation.html#ggdModelDocumentation"><code>ggdModelDocumentation</code></a>. This base class offers code that can be used by any Documenter to read the model in question, format the information according to a template and save the resulting documentation in a JSON format. Documenters save the underlying information using the JSON format. With the JSON documentation file at hand, the user can then use existing third-party libraries to transform the information stored in JSON into a variety of formats (eg, HTML, PDF) as needed.</p>
<p>One current area of development is the automatic filing of some fields related to the model. The objective is to automatise documentation of the information that can be fetched automatically from the model, leaving time for the analyst to concentrate on other tasks, such as considering the ethical implications of the machine learning model being trained.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ggdModelDocumentation" class="doc_header"><code>class</code> <code>ggdModelDocumentation</code><a href="https://github.com/dkgaraujo/gingado/tree/main/gingado/model_documentation.py#L10" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ggdModelDocumentation</code>()</p>
</blockquote>
<p>Base class for gingado Documenters</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ModelCard">ModelCard<a class="anchor-link" href="#ModelCard"> </a></h2><p><a href="/gingado/documentation.html#ModelCard"><code>ModelCard</code></a> - the model documentation template inspired by the work of <a href="https://dl.acm.org/doi/abs/10.1145/3287560.3287596?casa_token=3JORxBYy_DQAAAAA:0RsTpg5NsCX8B2lEwMg81rCxHiQlkZIuP1rPjAmOOF1fP0NTi3Vv3-WT75gwQm6bysUYxdXLkgqUuA">Mitchell et al, 2019</a> already comes with <code>gingado</code>. Its template can be used by users as is, or tweaked according to each need. The <a href="/gingado/documentation.html#ModelCard"><code>ModelCard</code></a> template can also serve as inspiration for any custom documentation needs. Users with documentation needs beyond the out-of-the-box solutions provided by <code>gingado</code> can create their own class of Documenters (more information on that below), and compatibility with these custom documentation routines with the rest of the code is ensured. Users are encouraged to submit a pull request with their own documentation models subclassing <a href="/gingado/documentation.html#ggdModelDocumentation"><code>ggdModelDocumentation</code></a> if these custom templates can also benefit other users.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ModelCard" class="doc_header"><code>class</code> <code>ModelCard</code><a href="https://github.com/dkgaraujo/gingado/tree/main/gingado/model_documentation.py#L105" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ModelCard</code>(<strong><code>file_path</code></strong>=<em><code>''</code></em>, <strong><code>autofill</code></strong>=<em><code>True</code></em>, <strong><code>indent_level</code></strong>=<em><code>2</code></em>) :: <a href="/gingado/documentation.html#ggdModelDocumentation"><code>ggdModelDocumentation</code></a></p>
</blockquote>
<p>Base class for gingado Documenters</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Basic-functioning-of-model-documentation">Basic functioning of model documentation<a class="anchor-link" href="#Basic-functioning-of-model-documentation"> </a></h2><p>After a Documenter object, such as <a href="/gingado/documentation.html#ModelCard"><code>ModelCard</code></a> is instanciated, the user can see the underlying template with the module <code>show_template</code>, as below:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model_doc</span> <span class="o">=</span> <span class="n">ModelCard</span><span class="p">(</span><span class="n">autofill</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">model_doc</span><span class="o">.</span><span class="n">show_template</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">==</span> <span class="n">ModelCard</span><span class="o">.</span><span class="n">template</span>

<span class="n">model_doc</span><span class="o">.</span><span class="n">show_template</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>
<details class="description">
      <summary data-open="Hide Output" data-close="Show Output"></summary>
        <summary></summary>
        
<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{
  &#34;model_details&#34;: {
    &#34;field_description&#34;: &#34;Basic information about the model&#34;,
    &#34;developer&#34;: &#34;Person or organisation developing the model&#34;,
    &#34;datetime&#34;: &#34;Model date&#34;,
    &#34;version&#34;: &#34;Model version&#34;,
    &#34;type&#34;: &#34;Model type&#34;,
    &#34;info&#34;: &#34;Information about training algorithms, parameters, fairness constraints or other applied approaches, and features&#34;,
    &#34;paper&#34;: &#34;Paper or other resource for more information&#34;,
    &#34;citation&#34;: &#34;Citation details&#34;,
    &#34;license&#34;: &#34;License&#34;,
    &#34;contact&#34;: &#34;Where to send questions or comments about the model&#34;
  },
  &#34;intended_use&#34;: {
    &#34;field_description&#34;: &#34;Use cases that were envisioned during development&#34;,
    &#34;primary_uses&#34;: &#34;Primary intended uses&#34;,
    &#34;primary_users&#34;: &#34;Primary intended users&#34;,
    &#34;out_of_scope&#34;: &#34;Out-of-scope use cases&#34;
  },
  &#34;factors&#34;: {
    &#34;field_description&#34;: &#34;Factors could include demographic or phenotypic groups, environmental conditions, technical attributes, or others&#34;,
    &#34;relevant&#34;: &#34;Relevant factors&#34;,
    &#34;evaluation&#34;: &#34;Evaluation factors&#34;
  },
  &#34;metrics&#34;: {
    &#34;field_description&#34;: &#34;Metrics should be chosen to reflect potential real world impacts of the model&#34;,
    &#34;performance_measures&#34;: &#34;Model performance measures&#34;,
    &#34;thresholds&#34;: &#34;Decision thresholds&#34;,
    &#34;variation_approaches&#34;: &#34;Variation approaches&#34;
  },
  &#34;evaluation_data&#34;: {
    &#34;field_description&#34;: &#34;Details on the dataset(s) used for the quantitative analyses in the documentation&#34;,
    &#34;datasets&#34;: &#34;Datasets&#34;,
    &#34;motivation&#34;: &#34;Motivation&#34;,
    &#34;preprocessing&#34;: &#34;Preprocessing&#34;
  },
  &#34;training_data&#34;: {
    &#34;field_description&#34;: &#34;\n            May not be possible to provide in practice. When possible, this section should mirror &#39;Evaluation Data&#39;. \n            If such detail is not possible, minimal allowable information should be provided here, \n            such as details of the distribution over various factors in the training datasets.&#34;,
    &#34;training_data&#34;: &#34;Information on training data&#34;
  },
  &#34;quant_analyses&#34;: {
    &#34;field_description&#34;: &#34;Quantitative Analyses&#34;,
    &#34;unitary&#34;: &#34;Unitary results&#34;,
    &#34;intersectional&#34;: &#34;Intersectional results&#34;
  },
  &#34;ethical_considerations&#34;: {
    &#34;field_description&#34;: &#34;\n            Ethical considerations that went into model development, surfacing ethical challenges and \n            solutions to stakeholders. Ethical analysis does not always lead to precise solutions, but the process \n            of ethical contemplation is worthwhile to inform on responsible practices and next steps in future work.&#34;,
    &#34;sensitive_data&#34;: &#34;Does the model use any sensitive data (e.g., protected classes)?&#34;,
    &#34;human_life&#34;: &#34;Is the model intended to inform decisions about mat- ters central to human life or flourishing - e.g., health or safety? Or could it be used in such a way?&#34;,
    &#34;mitigations&#34;: &#34;What risk mitigation strategies were used during model development?&#34;,
    &#34;risks_and_harms&#34;: &#34;\n            What risks may be present in model usage? Try to identify the potential recipients, likelihood, and magnitude of harms. \n            If these cannot be determined, note that they were consid- ered but remain unknown&#34;,
    &#34;use_cases&#34;: &#34;Are there any known model use cases that are especially fraught?&#34;,
    &#34;additional_information&#34;: &#34;\n            If possible, this section should also include any additional ethical considerations that went into model development, \n            for example, review by an external board, or testing with a specific community.&#34;
  },
  &#34;caveats_recommendations&#34;: {
    &#34;field_description&#34;: &#34;Additional concerns that were not covered in the previous sections&#34;,
    &#34;caveats&#34;: &#34;For example, did the results suggest any further testing? Were there any relevant groups that were not represented in the evaluation dataset?&#34;,
    &#34;recommendations&#34;: &#34;Are there additional recommendations for model use? What are the ideal characteristics of an evaluation dataset for this model?&#34;
  }
}
</pre>
</div>
</div>

</div>
</div>

    </details>
</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The method <code>show_json</code> prints the Documenter's documentation template, where the unfilled information retains the descriptions from the original template:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model_doc</span> <span class="o">=</span> <span class="n">ModelCard</span><span class="p">(</span><span class="n">autofill</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">model_doc</span><span class="o">.</span><span class="n">show_json</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>
<details class="description">
      <summary data-open="Hide Output" data-close="Show Output"></summary>
        <summary></summary>
        
<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;model_details&#39;: {&#39;developer&#39;: &#39;douglasaraujo&#39;,
  &#39;datetime&#39;: &#39;2022-06-06 01:45:36 &#39;,
  &#39;version&#39;: &#39;Model version&#39;,
  &#39;type&#39;: &#39;Model type&#39;,
  &#39;info&#39;: &#39;Information about training algorithms, parameters, fairness constraints or other applied approaches, and features&#39;,
  &#39;paper&#39;: &#39;Paper or other resource for more information&#39;,
  &#39;citation&#39;: &#39;Citation details&#39;,
  &#39;license&#39;: &#39;License&#39;,
  &#39;contact&#39;: &#39;Where to send questions or comments about the model&#39;},
 &#39;intended_use&#39;: {&#39;primary_uses&#39;: &#39;Primary intended uses&#39;,
  &#39;primary_users&#39;: &#39;Primary intended users&#39;,
  &#39;out_of_scope&#39;: &#39;Out-of-scope use cases&#39;},
 &#39;factors&#39;: {&#39;relevant&#39;: &#39;Relevant factors&#39;,
  &#39;evaluation&#39;: &#39;Evaluation factors&#39;},
 &#39;metrics&#39;: {&#39;performance_measures&#39;: &#39;Model performance measures&#39;,
  &#39;thresholds&#39;: &#39;Decision thresholds&#39;,
  &#39;variation_approaches&#39;: &#39;Variation approaches&#39;},
 &#39;evaluation_data&#39;: {&#39;datasets&#39;: &#39;Datasets&#39;,
  &#39;motivation&#39;: &#39;Motivation&#39;,
  &#39;preprocessing&#39;: &#39;Preprocessing&#39;},
 &#39;training_data&#39;: {&#39;training_data&#39;: &#39;Information on training data&#39;},
 &#39;quant_analyses&#39;: {&#39;unitary&#39;: &#39;Unitary results&#39;,
  &#39;intersectional&#39;: &#39;Intersectional results&#39;},
 &#39;ethical_considerations&#39;: {&#39;sensitive_data&#39;: &#39;Does the model use any sensitive data (e.g., protected classes)?&#39;,
  &#39;human_life&#39;: &#39;Is the model intended to inform decisions about mat- ters central to human life or flourishing - e.g., health or safety? Or could it be used in such a way?&#39;,
  &#39;mitigations&#39;: &#39;What risk mitigation strategies were used during model development?&#39;,
  &#39;risks_and_harms&#39;: &#39;\n            What risks may be present in model usage? Try to identify the potential recipients, likelihood, and magnitude of harms. \n            If these cannot be determined, note that they were consid- ered but remain unknown&#39;,
  &#39;use_cases&#39;: &#39;Are there any known model use cases that are especially fraught?&#39;,
  &#39;additional_information&#39;: &#39;\n            If possible, this section should also include any additional ethical considerations that went into model development, \n            for example, review by an external board, or testing with a specific community.&#39;},
 &#39;caveats_recommendations&#39;: {&#39;caveats&#39;: &#39;For example, did the results suggest any further testing? Were there any relevant groups that were not represented in the evaluation dataset?&#39;,
  &#39;recommendations&#39;: &#39;Are there additional recommendations for model use? What are the ideal characteristics of an evaluation dataset for this model?&#39;}}</pre>
</div>

</div>

</div>
</div>

    </details>
</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The template is protected from editing once a Documenter has been created. This way, even if a user unwarrantedly changes the template, this does not interfere with the Documenter functionality.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model_doc</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">model_doc</span><span class="o">.</span><span class="n">show_template</span><span class="p">()</span>

<span class="k">assert</span> <span class="n">model_doc</span><span class="o">.</span><span class="n">show_template</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">==</span> <span class="n">ModelCard</span><span class="o">.</span><span class="n">template</span>
</pre></div>

    </div>
</div>
</div>
<details class="description">
      <summary data-open="Hide Output" data-close="Show Output"></summary>
        <summary></summary>
        
<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{
  &#34;model_details&#34;: {
    &#34;field_description&#34;: &#34;Basic information about the model&#34;,
    &#34;developer&#34;: &#34;Person or organisation developing the model&#34;,
    &#34;datetime&#34;: &#34;Model date&#34;,
    &#34;version&#34;: &#34;Model version&#34;,
    &#34;type&#34;: &#34;Model type&#34;,
    &#34;info&#34;: &#34;Information about training algorithms, parameters, fairness constraints or other applied approaches, and features&#34;,
    &#34;paper&#34;: &#34;Paper or other resource for more information&#34;,
    &#34;citation&#34;: &#34;Citation details&#34;,
    &#34;license&#34;: &#34;License&#34;,
    &#34;contact&#34;: &#34;Where to send questions or comments about the model&#34;
  },
  &#34;intended_use&#34;: {
    &#34;field_description&#34;: &#34;Use cases that were envisioned during development&#34;,
    &#34;primary_uses&#34;: &#34;Primary intended uses&#34;,
    &#34;primary_users&#34;: &#34;Primary intended users&#34;,
    &#34;out_of_scope&#34;: &#34;Out-of-scope use cases&#34;
  },
  &#34;factors&#34;: {
    &#34;field_description&#34;: &#34;Factors could include demographic or phenotypic groups, environmental conditions, technical attributes, or others&#34;,
    &#34;relevant&#34;: &#34;Relevant factors&#34;,
    &#34;evaluation&#34;: &#34;Evaluation factors&#34;
  },
  &#34;metrics&#34;: {
    &#34;field_description&#34;: &#34;Metrics should be chosen to reflect potential real world impacts of the model&#34;,
    &#34;performance_measures&#34;: &#34;Model performance measures&#34;,
    &#34;thresholds&#34;: &#34;Decision thresholds&#34;,
    &#34;variation_approaches&#34;: &#34;Variation approaches&#34;
  },
  &#34;evaluation_data&#34;: {
    &#34;field_description&#34;: &#34;Details on the dataset(s) used for the quantitative analyses in the documentation&#34;,
    &#34;datasets&#34;: &#34;Datasets&#34;,
    &#34;motivation&#34;: &#34;Motivation&#34;,
    &#34;preprocessing&#34;: &#34;Preprocessing&#34;
  },
  &#34;training_data&#34;: {
    &#34;field_description&#34;: &#34;\n            May not be possible to provide in practice. When possible, this section should mirror &#39;Evaluation Data&#39;. \n            If such detail is not possible, minimal allowable information should be provided here, \n            such as details of the distribution over various factors in the training datasets.&#34;,
    &#34;training_data&#34;: &#34;Information on training data&#34;
  },
  &#34;quant_analyses&#34;: {
    &#34;field_description&#34;: &#34;Quantitative Analyses&#34;,
    &#34;unitary&#34;: &#34;Unitary results&#34;,
    &#34;intersectional&#34;: &#34;Intersectional results&#34;
  },
  &#34;ethical_considerations&#34;: {
    &#34;field_description&#34;: &#34;\n            Ethical considerations that went into model development, surfacing ethical challenges and \n            solutions to stakeholders. Ethical analysis does not always lead to precise solutions, but the process \n            of ethical contemplation is worthwhile to inform on responsible practices and next steps in future work.&#34;,
    &#34;sensitive_data&#34;: &#34;Does the model use any sensitive data (e.g., protected classes)?&#34;,
    &#34;human_life&#34;: &#34;Is the model intended to inform decisions about mat- ters central to human life or flourishing - e.g., health or safety? Or could it be used in such a way?&#34;,
    &#34;mitigations&#34;: &#34;What risk mitigation strategies were used during model development?&#34;,
    &#34;risks_and_harms&#34;: &#34;\n            What risks may be present in model usage? Try to identify the potential recipients, likelihood, and magnitude of harms. \n            If these cannot be determined, note that they were consid- ered but remain unknown&#34;,
    &#34;use_cases&#34;: &#34;Are there any known model use cases that are especially fraught?&#34;,
    &#34;additional_information&#34;: &#34;\n            If possible, this section should also include any additional ethical considerations that went into model development, \n            for example, review by an external board, or testing with a specific community.&#34;
  },
  &#34;caveats_recommendations&#34;: {
    &#34;field_description&#34;: &#34;Additional concerns that were not covered in the previous sections&#34;,
    &#34;caveats&#34;: &#34;For example, did the results suggest any further testing? Were there any relevant groups that were not represented in the evaluation dataset?&#34;,
    &#34;recommendations&#34;: &#34;Are there additional recommendations for model use? What are the ideal characteristics of an evaluation dataset for this model?&#34;
  }
}
</pre>
</div>
</div>

</div>
</div>

    </details>
</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Users can find which fields in their templates are still without response by using the module <code>open_questions</code>. The levels of the template are reflected in the resulting dictionary, with double underscores separating the different dictionary levels in the underlying template.</p>
<p>Below we see that after inputting information for the item <code>caveats</code> in the section <code>caveats_recommendations</code>, this item does not appear in the results of the <code>open_questions</code> method.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model_doc</span><span class="o">.</span><span class="n">fill_info</span><span class="p">({</span><span class="s1">&#39;caveats_recommendations&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;caveats&#39;</span><span class="p">:</span> <span class="s1">&#39;This is another test&#39;</span><span class="p">}})</span>
<span class="k">assert</span> <span class="n">model_doc</span><span class="o">.</span><span class="n">json_doc</span><span class="p">[</span><span class="s1">&#39;caveats_recommendations&#39;</span><span class="p">][</span><span class="s1">&#39;caveats&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;This is another test&quot;</span>

<span class="c1"># note that caveats_recommendations__caveats is no longer considered an open question</span>
<span class="c1"># after being filled in through `fill_info`.</span>
<span class="nb">print</span><span class="p">([</span><span class="n">oq</span> <span class="k">for</span> <span class="n">oq</span> <span class="ow">in</span> <span class="n">model_doc</span><span class="o">.</span><span class="n">open_questions</span><span class="p">()</span> <span class="k">if</span> <span class="n">oq</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;caveats&#39;</span><span class="p">)])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[&#39;caveats_recommendations__recommendations&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And now the complete result of the <code>open_questions</code> method:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model_doc</span><span class="o">.</span><span class="n">open_questions</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>
<details class="description">
      <summary data-open="Hide Output" data-close="Show Output"></summary>
        <summary></summary>
        
<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;model_details__version&#39;,
 &#39;model_details__type&#39;,
 &#39;model_details__info&#39;,
 &#39;model_details__paper&#39;,
 &#39;model_details__citation&#39;,
 &#39;model_details__license&#39;,
 &#39;model_details__contact&#39;,
 &#39;intended_use__primary_uses&#39;,
 &#39;intended_use__primary_users&#39;,
 &#39;intended_use__out_of_scope&#39;,
 &#39;factors__relevant&#39;,
 &#39;factors__evaluation&#39;,
 &#39;metrics__performance_measures&#39;,
 &#39;metrics__thresholds&#39;,
 &#39;metrics__variation_approaches&#39;,
 &#39;evaluation_data__datasets&#39;,
 &#39;evaluation_data__motivation&#39;,
 &#39;evaluation_data__preprocessing&#39;,
 &#39;training_data__training_data&#39;,
 &#39;quant_analyses__unitary&#39;,
 &#39;quant_analyses__intersectional&#39;,
 &#39;ethical_considerations__sensitive_data&#39;,
 &#39;ethical_considerations__human_life&#39;,
 &#39;ethical_considerations__mitigations&#39;,
 &#39;ethical_considerations__risks_and_harms&#39;,
 &#39;ethical_considerations__use_cases&#39;,
 &#39;ethical_considerations__additional_information&#39;,
 &#39;caveats_recommendations__recommendations&#39;]</pre>
</div>

</div>

</div>
</div>

    </details>
</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If the user wants to fill in an empty field such as the ones identified above by the method <code>open_questions</code>, the user simply needs to pass to the module <code>fill_info</code> a dictionary with the corresponding information. Depending on the template, the dictionary may be nested. 
{% include note.html content='it is technically possible to attribute the element directly to the attribute <code>json_doc</code>, but this should be avoided in favour of using the method <code>fill_info</code>. The latter tests whether the new information is valid according to the documentation template and also enables the filling of more than one question at the same time. In addition, attributing information directly to <code>json_doc</code> is not logged, and may unwarrantedly create new entries that are not part of the template (eg, if a new dictionary key is created due to typos).' %}
The template serves to provide specific instances of the Documenter object with a form-like structure, indicating which fields are open and thus require some answers or information. Consequently, the template does not change when the actual document object changes after information is added by <code>fill_info</code>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">new_info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;metrics&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;performance_measures&#39;</span><span class="p">:</span> <span class="s2">&quot;This is a test&quot;</span><span class="p">},</span>
    <span class="s1">&#39;caveats_recommendations&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;caveats&#39;</span><span class="p">:</span> <span class="s2">&quot;This is another test&quot;</span><span class="p">}</span>
    <span class="p">}</span>

<span class="n">model_doc</span><span class="o">.</span><span class="n">fill_info</span><span class="p">(</span><span class="n">new_info</span><span class="p">)</span>
<span class="nb">print</span><span class="p">([</span><span class="n">model_doc</span><span class="o">.</span><span class="n">json_doc</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">],</span> <span class="n">ModelCard</span><span class="o">.</span><span class="n">template</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">]])</span>

<span class="k">assert</span> <span class="n">model_doc</span><span class="o">.</span><span class="n">show_template</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">==</span> <span class="n">ModelCard</span><span class="o">.</span><span class="n">template</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[{&#39;performance_measures&#39;: &#39;This is a test&#39;, &#39;thresholds&#39;: &#39;Decision thresholds&#39;, &#39;variation_approaches&#39;: &#39;Variation approaches&#39;}, {&#39;field_description&#39;: &#39;Metrics should be chosen to reflect potential real world impacts of the model&#39;, &#39;performance_measures&#39;: &#39;Model performance measures&#39;, &#39;thresholds&#39;: &#39;Decision thresholds&#39;, &#39;variation_approaches&#39;: &#39;Variation approaches&#39;}]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Reading-information-from-models">Reading information from models<a class="anchor-link" href="#Reading-information-from-models"> </a></h2><p><code>gingado</code>'s <a href="/gingado/documentation.html#ggdModelDocumentation"><code>ggdModelDocumentation</code></a> base class is able to extract information from machine learning models from a number of widely used libraries and make it available to the Documenter objects. This is done through the method <code>read_model</code>, which recognises whether the model is a <code>gingado</code> object or any of <code>scikit-learn</code>, <code>keras</code>, or <code>fastai</code> models and read the model characteristics appropriately. For filing out information from other models (eg, <code>pytorch</code> or even models coded from scratch, machine learning or not), the user can benefit from the module <code>fill_model_info</code> that every Documenter should have, as demonstrated below.</p>
<p>In the case of <a href="/gingado/documentation.html#ModelCard"><code>ModelCard</code></a>, these informations are included under <code>model_details</code>, item <code>info</code>. But the model information could be saved in another area of a custom Documenter.
{% include note.html content='the model-specific information saved is different depending on the model&#8217;s original library.' %}</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Preliminaries">Preliminaries<a class="anchor-link" href="#Preliminaries"> </a></h3><p>The mock dataset below is used to construct models using different libraries, to demonstrate how they are read by Documenters.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">make_classification</span>

<span class="c1"># some mock up data</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">make_classification</span><span class="p">()</span>

<span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>((100, 20), (100,))</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="gingado-Benchmark">gingado Benchmark<a class="anchor-link" href="#gingado-Benchmark"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">gingado.benchmark</span> <span class="kn">import</span> <span class="n">ClassificationBenchmark</span>

<span class="c1"># the gingado benchmark</span>
<span class="n">gingado_clf</span> <span class="o">=</span> <span class="n">ClassificationBenchmark</span><span class="p">(</span><span class="n">verbose_grid</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Fitting 5 folds for each of 3 candidates, totalling 15 fits
[CV 1/5] END ...................n_estimators=50;, score=0.950 total time=   0.0s
[CV 2/5] END ...................n_estimators=50;, score=0.950 total time=   0.0s
[CV 3/5] END ...................n_estimators=50;, score=0.950 total time=   0.0s
[CV 4/5] END ...................n_estimators=50;, score=0.900 total time=   0.0s
[CV 5/5] END ...................n_estimators=50;, score=0.900 total time=   0.0s
[CV 1/5] END ..................n_estimators=100;, score=0.950 total time=   0.1s
[CV 2/5] END ..................n_estimators=100;, score=0.950 total time=   0.1s
[CV 3/5] END ..................n_estimators=100;, score=0.900 total time=   0.1s
[CV 4/5] END ..................n_estimators=100;, score=0.900 total time=   0.1s
[CV 5/5] END ..................n_estimators=100;, score=0.950 total time=   0.1s
[CV 1/5] END ..................n_estimators=250;, score=0.950 total time=   0.2s
[CV 2/5] END ..................n_estimators=250;, score=0.950 total time=   0.2s
[CV 3/5] END ..................n_estimators=250;, score=0.950 total time=   0.3s
[CV 4/5] END ..................n_estimators=250;, score=0.900 total time=   0.2s
[CV 5/5] END ..................n_estimators=250;, score=0.950 total time=   0.2s
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># a new instance of ModelCard is created and used to document the model</span>
<span class="n">model_doc_gingado</span> <span class="o">=</span> <span class="n">ModelCard</span><span class="p">()</span>
<span class="n">model_doc_gingado</span><span class="o">.</span><span class="n">read_model</span><span class="p">(</span><span class="n">gingado_clf</span><span class="o">.</span><span class="n">benchmark</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model_doc_gingado</span><span class="o">.</span><span class="n">show_json</span><span class="p">()[</span><span class="s1">&#39;model_details&#39;</span><span class="p">][</span><span class="s1">&#39;info&#39;</span><span class="p">])</span>

<span class="c1"># but given that gingado Benchmark objects already document the best model at every fit, we can check that they are equal:</span>
<span class="k">assert</span> <span class="n">model_doc_gingado</span><span class="o">.</span><span class="n">show_json</span><span class="p">()[</span><span class="s1">&#39;model_details&#39;</span><span class="p">][</span><span class="s1">&#39;info&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">gingado_clf</span><span class="o">.</span><span class="n">model_documentation</span><span class="o">.</span><span class="n">show_json</span><span class="p">()[</span><span class="s1">&#39;model_details&#39;</span><span class="p">][</span><span class="s1">&#39;info&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>
<details class="description">
      <summary data-open="Hide Output" data-close="Show Output"></summary>
        <summary></summary>
        
<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;_estimator_type&#39;: &#39;classifier&#39;, &#39;best_estimator_&#39;: RandomForestClassifier(n_estimators=250), &#39;best_index_&#39;: 2, &#39;best_params_&#39;: {&#39;n_estimators&#39;: 250}, &#39;best_score_&#39;: 0.9399999999999998, &#39;classes_&#39;: array([0, 1]), &#39;cv_results_&#39;: {&#39;mean_fit_time&#39;: array([0.0422112 , 0.08873978, 0.21713166]), &#39;std_fit_time&#39;: array([0.00135132, 0.00518193, 0.0078622 ]), &#39;mean_score_time&#39;: array([0.00399241, 0.00711241, 0.02049341]), &#39;std_score_time&#39;: array([0.00042215, 0.00014769, 0.00255255]), &#39;param_n_estimators&#39;: masked_array(data=[50, 100, 250],
             mask=[False, False, False],
       fill_value=&#39;?&#39;,
            dtype=object), &#39;params&#39;: [{&#39;n_estimators&#39;: 50}, {&#39;n_estimators&#39;: 100}, {&#39;n_estimators&#39;: 250}], &#39;split0_test_score&#39;: array([0.95, 0.95, 0.95]), &#39;split1_test_score&#39;: array([0.95, 0.95, 0.95]), &#39;split2_test_score&#39;: array([0.95, 0.9 , 0.95]), &#39;split3_test_score&#39;: array([0.9, 0.9, 0.9]), &#39;split4_test_score&#39;: array([0.9 , 0.95, 0.95]), &#39;mean_test_score&#39;: array([0.93, 0.93, 0.94]), &#39;std_test_score&#39;: array([0.0244949, 0.0244949, 0.02     ]), &#39;rank_test_score&#39;: array([2, 2, 1], dtype=int32)}, &#39;multimetric_&#39;: False, &#39;n_features_in_&#39;: 20, &#39;n_splits_&#39;: 5, &#39;refit_time_&#39;: 0.21876978874206543, &#39;scorer_&#39;: &lt;function _passthrough_scorer at 0x13b7f9510&gt;}
</pre>
</div>
</div>

</div>
</div>

    </details>
</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="scikit-learn">scikit-learn<a class="anchor-link" href="#scikit-learn"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>

<span class="n">sklearn_clf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model_doc_sklearn</span> <span class="o">=</span> <span class="n">ModelCard</span><span class="p">()</span>
<span class="n">model_doc_sklearn</span><span class="o">.</span><span class="n">read_model</span><span class="p">(</span><span class="n">sklearn_clf</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model_doc_sklearn</span><span class="o">.</span><span class="n">show_json</span><span class="p">()[</span><span class="s1">&#39;model_details&#39;</span><span class="p">][</span><span class="s1">&#39;info&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>
<details class="description">
      <summary data-open="Hide Output" data-close="Show Output"></summary>
        <summary></summary>
        
<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;_estimator_type&#39;: &#39;classifier&#39;, &#39;base_estimator_&#39;: DecisionTreeClassifier(), &#39;classes_&#39;: array([0, 1]), &#39;estimators_&#39;: [DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=41133039), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1202631833), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=851097655), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1214981591), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=432508233), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=276374143), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=2089672251), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1443147939), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1113101672), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1660438956), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1737532035), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1991274353), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=37854801), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1319347421), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1485018085), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1489861295), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=813618998), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=52812599), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=489375747), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1359076922), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=751837518), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=382698717), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1988331547), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1619665204), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=924701217), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1463298929), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=785452322), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1829322095), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1104922124), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1557612301), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1477307212), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1984706514), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1815249762), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=246763536), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=2095118571), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=756888051), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=286318778), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=937335164), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1225113564), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=770538409), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=722741699), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1787329849), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=445458406), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1699414818), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=776165389), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1373554751), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1319056311), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=665309444), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=583367337), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1895650927), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=61949215), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=3262118), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=76441463), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1778623344), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1311601758), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1635511540), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1109977305), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=489739214), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=2126238687), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=960956342), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1057931643), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=782018073), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=76488698), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=625931025), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1516536944), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=2077421560), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1010306127), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1530989509), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1888049167), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=252592508), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=745791077), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=2113279341), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=767082320), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=690717513), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=850169541), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=4583203), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1955343751), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=439078627), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1141107859), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=540920150), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=165831915), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1949478337), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1645693753), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1700475198), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=852844086), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=922439881), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=785562595), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1013049307), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1287719325), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1258286125), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1064837157), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1495246752), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1466862244), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=2060094054), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=456054286), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1560787013), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1512040060), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=468369193), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1717764713), DecisionTreeClassifier(max_features=&#39;auto&#39;, random_state=1748026652)], &#39;feature_importances_&#39;: array([0.26329534, 0.01894208, 0.01027939, 0.01685944, 0.10884405,
       0.02636191, 0.01986916, 0.01088893, 0.01228042, 0.32213409,
       0.0127138 , 0.01552959, 0.02895565, 0.01458237, 0.02318153,
       0.02219858, 0.01753817, 0.01232438, 0.01833626, 0.02488488]), &#39;n_classes_&#39;: 2, &#39;n_features_&#39;: 20, &#39;n_features_in_&#39;: 20, &#39;n_outputs_&#39;: 1}
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/Users/douglasaraujo/Coding/.venv_gingado/lib/python3.10/site-packages/sklearn/utils/deprecation.py:103: FutureWarning: Attribute `n_features_` was deprecated in version 1.0 and will be removed in 1.2. Use `n_features_in_` instead.
  warnings.warn(msg, category=FutureWarning)
</pre>
</div>
</div>

</div>
</div>

    </details>
</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Keras">Keras<a class="anchor-link" href="#Keras"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">tensorflow</span> <span class="kn">import</span> <span class="n">keras</span>

<span class="n">keras_clf</span> <span class="o">=</span> <span class="n">keras</span><span class="o">.</span><span class="n">Sequential</span><span class="p">()</span>
<span class="n">keras_clf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">keras</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">Dense</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="n">activation</span><span class="o">=</span><span class="s1">&#39;relu&#39;</span><span class="p">,</span> <span class="n">input_shape</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,)))</span>
<span class="n">keras_clf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">keras</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">Dense</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">activation</span><span class="o">=</span><span class="s1">&#39;relu&#39;</span><span class="p">))</span>
<span class="n">keras_clf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">keras</span><span class="o">.</span><span class="n">layers</span><span class="o">.</span><span class="n">Dense</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">activation</span><span class="o">=</span><span class="s1">&#39;sigmoid&#39;</span><span class="p">))</span>
<span class="n">keras_clf</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">optimizer</span><span class="o">=</span><span class="s1">&#39;sgd&#39;</span><span class="p">,</span> <span class="n">loss</span><span class="o">=</span><span class="s1">&#39;binary_crossentropy&#39;</span><span class="p">)</span>
<span class="n">keras_clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">epochs</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Epoch 1/10
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2022-06-06 01:46:01.153337: I tensorflow/core/platform/cpu_feature_guard.cc:151] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>10/10 [==============================] - 0s 779us/step - loss: 0.9890
Epoch 2/10
10/10 [==============================] - 0s 1ms/step - loss: 0.8943
Epoch 3/10
10/10 [==============================] - 0s 766us/step - loss: 0.8247
Epoch 4/10
10/10 [==============================] - 0s 735us/step - loss: 0.7713
Epoch 5/10
10/10 [==============================] - 0s 852us/step - loss: 0.7301
Epoch 6/10
10/10 [==============================] - 0s 796us/step - loss: 0.6952
Epoch 7/10
10/10 [==============================] - 0s 767us/step - loss: 0.6666
Epoch 8/10
10/10 [==============================] - 0s 843us/step - loss: 0.6433
Epoch 9/10
10/10 [==============================] - 0s 847us/step - loss: 0.6222
Epoch 10/10
10/10 [==============================] - 0s 922us/step - loss: 0.6033
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;keras.callbacks.History at 0x14707d6c0&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model_doc_keras</span> <span class="o">=</span> <span class="n">ModelCard</span><span class="p">()</span>
<span class="n">model_doc_keras</span><span class="o">.</span><span class="n">read_model</span><span class="p">(</span><span class="n">keras_clf</span><span class="p">)</span>
<span class="n">model_doc_keras</span><span class="o">.</span><span class="n">show_json</span><span class="p">()[</span><span class="s1">&#39;model_details&#39;</span><span class="p">][</span><span class="s1">&#39;info&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;{&#34;class_name&#34;: &#34;Sequential&#34;, &#34;config&#34;: {&#34;name&#34;: &#34;sequential&#34;, &#34;layers&#34;: [{&#34;class_name&#34;: &#34;InputLayer&#34;, &#34;config&#34;: {&#34;batch_input_shape&#34;: [null, 20], &#34;dtype&#34;: &#34;float32&#34;, &#34;sparse&#34;: false, &#34;ragged&#34;: false, &#34;name&#34;: &#34;dense_input&#34;}}, {&#34;class_name&#34;: &#34;Dense&#34;, &#34;config&#34;: {&#34;name&#34;: &#34;dense&#34;, &#34;trainable&#34;: true, &#34;batch_input_shape&#34;: [null, 20], &#34;dtype&#34;: &#34;float32&#34;, &#34;units&#34;: 16, &#34;activation&#34;: &#34;relu&#34;, &#34;use_bias&#34;: true, &#34;kernel_initializer&#34;: {&#34;class_name&#34;: &#34;GlorotUniform&#34;, &#34;config&#34;: {&#34;seed&#34;: null}}, &#34;bias_initializer&#34;: {&#34;class_name&#34;: &#34;Zeros&#34;, &#34;config&#34;: {}}, &#34;kernel_regularizer&#34;: null, &#34;bias_regularizer&#34;: null, &#34;activity_regularizer&#34;: null, &#34;kernel_constraint&#34;: null, &#34;bias_constraint&#34;: null}}, {&#34;class_name&#34;: &#34;Dense&#34;, &#34;config&#34;: {&#34;name&#34;: &#34;dense_1&#34;, &#34;trainable&#34;: true, &#34;dtype&#34;: &#34;float32&#34;, &#34;units&#34;: 8, &#34;activation&#34;: &#34;relu&#34;, &#34;use_bias&#34;: true, &#34;kernel_initializer&#34;: {&#34;class_name&#34;: &#34;GlorotUniform&#34;, &#34;config&#34;: {&#34;seed&#34;: null}}, &#34;bias_initializer&#34;: {&#34;class_name&#34;: &#34;Zeros&#34;, &#34;config&#34;: {}}, &#34;kernel_regularizer&#34;: null, &#34;bias_regularizer&#34;: null, &#34;activity_regularizer&#34;: null, &#34;kernel_constraint&#34;: null, &#34;bias_constraint&#34;: null}}, {&#34;class_name&#34;: &#34;Dense&#34;, &#34;config&#34;: {&#34;name&#34;: &#34;dense_2&#34;, &#34;trainable&#34;: true, &#34;dtype&#34;: &#34;float32&#34;, &#34;units&#34;: 1, &#34;activation&#34;: &#34;sigmoid&#34;, &#34;use_bias&#34;: true, &#34;kernel_initializer&#34;: {&#34;class_name&#34;: &#34;GlorotUniform&#34;, &#34;config&#34;: {&#34;seed&#34;: null}}, &#34;bias_initializer&#34;: {&#34;class_name&#34;: &#34;Zeros&#34;, &#34;config&#34;: {}}, &#34;kernel_regularizer&#34;: null, &#34;bias_regularizer&#34;: null, &#34;activity_regularizer&#34;: null, &#34;kernel_constraint&#34;: null, &#34;bias_constraint&#34;: null}}]}, &#34;keras_version&#34;: &#34;2.8.0&#34;, &#34;backend&#34;: &#34;tensorflow&#34;}&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Other-models">Other models<a class="anchor-link" href="#Other-models"> </a></h3><p>Native support for automatic documentation of other model types, such as from <code>fastai</code>, <code>pytorch</code> is expected to be available in future versions. Until then, these models,any models coded form scratch by the user as well as any other model can be documented by passing the information as an argument to the Documenter's <code>fill_model_info</code> method. This can be done in any core Python format (a string, a list, a dictionary, etc). For example:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">torch</span>
<span class="kn">import</span> <span class="nn">torch.nn.functional</span> <span class="k">as</span> <span class="nn">F</span>

<span class="k">class</span> <span class="nc">MockDataset</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">Dataset</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">X</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">len</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">X</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">PytorchNet</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PytorchNet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer1</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer2</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer3</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">relu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer1</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">relu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer2</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">sigmoid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer3</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span>

<span class="n">pytorch_clf</span> <span class="o">=</span> <span class="n">PytorchNet</span><span class="p">()</span>

<span class="n">dataloader</span> <span class="o">=</span> <span class="n">MockDataset</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>


<span class="n">loss_func</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">BCELoss</span><span class="p">()</span>
<span class="n">optimizer</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">optim</span><span class="o">.</span><span class="n">SGD</span><span class="p">(</span><span class="n">pytorch_clf</span><span class="o">.</span><span class="n">parameters</span><span class="p">(),</span> <span class="n">lr</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span> <span class="n">momentum</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>

<span class="k">for</span> <span class="n">epoch</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">running_loss</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dataloader</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">_X</span><span class="p">,</span> <span class="n">_y</span> <span class="o">=</span> <span class="n">data</span>
        <span class="n">optimizer</span><span class="o">.</span><span class="n">zero_grad</span><span class="p">()</span>
        <span class="n">y_pred_epoch</span> <span class="o">=</span> <span class="n">pytorch_clf</span><span class="p">(</span><span class="n">_X</span><span class="p">)</span>
        <span class="n">loss</span> <span class="o">=</span> <span class="n">loss_func</span><span class="p">(</span><span class="n">y_pred_epoch</span><span class="p">,</span> <span class="n">_y</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">loss</span><span class="o">.</span><span class="n">backward</span><span class="p">()</span>
        <span class="n">optimizer</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model_doc_pytorch</span> <span class="o">=</span> <span class="n">ModelCard</span><span class="p">()</span>
<span class="n">model_doc_pytorch</span><span class="o">.</span><span class="n">fill_model_info</span><span class="p">(</span><span class="s2">&quot;This model is a neural network consisting of two fully connected layers and ending in a linear layer with a sigmoid activation&quot;</span><span class="p">)</span>
<span class="n">model_doc_pytorch</span><span class="o">.</span><span class="n">show_json</span><span class="p">()[</span><span class="s1">&#39;model_details&#39;</span><span class="p">][</span><span class="s1">&#39;info&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;This model is a neural network consisting of two fully connected layers and ending in a linear layer with a sigmoid activation&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Creating-a-custom-Documenter">Creating a custom Documenter<a class="anchor-link" href="#Creating-a-custom-Documenter"> </a></h2><p><code>gingado</code> users can easily transform their model documentation needs into a Documenter object. The main advantages of doing this are:</p>
<ul>
<li>the documentation template becomes a "recyclable" object that can be saved, loaded, and used in other models or code routines; and</li>
<li>model documentation can be more closely aligned with model creation and training, thus decreasing the probability that the model and its documentation diverge during the process of model development.</li>
</ul>
<p>The requirements for an object to be a <code>gingado</code> Documenter are:</p>
<ul>
<li>it must subclass <a href="/gingado/documentation.html#ggdModelDocumentation"><code>ggdModelDocumentation</code></a> (or implement all its methods if the user does not want to keep a dependency to <code>gingado</code>),</li>
<li>include the actual template for the documentation as a dictionary (with at most two levels of keys) in a class attribute called <code>template</code>,</li>
<li>follow the <code>scikit-learn</code> convention of storing the <code>__init__</code> parameters in attributes with the same name,</li>
<li>implement the <code>autofill_template</code> method using the <code>fill_info</code> method to set the automatically filled information fields, and</li>
<li>implement the <code>fill_model_info</code> method that assigns the information in <code>model_info</code> into the class custom template.</li>
</ul>

</div>
</div>
</div>
</div>


