---

title: Utils


keywords: fastai
sidebar: home_sidebar

summary: "Functions to support the use of `gingado`"
description: "Functions to support the use of `gingado`"
nb_path: "00_utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_username" class="doc_header"><code>get_username</code><a href="https://github.com/dkgaraujo/gingado/tree/main/gingado/utils.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_username</code>()</p>
</blockquote>
<p>Returns the active username in the computer</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">u</span> <span class="o">=</span> <span class="n">get_username</span><span class="p">()</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_datetime" class="doc_header"><code>get_datetime</code><a href="https://github.com/dkgaraujo/gingado/tree/main/gingado/utils.py#L19" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_datetime</code>()</p>
</blockquote>
<p>Returns the time now</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">get_datetime</span><span class="p">()</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Lag" class="doc_header"><code>class</code> <code>Lag</code><a href="https://github.com/dkgaraujo/gingado/tree/main/gingado/utils.py#L30" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Lag</code>(<strong><code>lags</code></strong>=<em><code>1</code></em>, <strong><code>jump</code></strong>=<em><code>0</code></em>, <strong><code>keep_contemporaneous_X</code></strong>=<em><code>False</code></em>) :: <code>BaseEstimator</code></p>
</blockquote>
<p>Base class for all estimators in scikit-learn.</p>
<h2 id="Notes">Notes<a class="anchor-link" href="#Notes"> </a></h2><p>All estimators should specify all the parameters that can be set
at the class level in their <code>__init__</code> as explicit keyword
arguments (no <code>*args</code> or <code>**kwargs</code>).</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The code below demonstrates how <a href="/gingado/utils.html#Lag"><code>Lag</code></a> works in practice.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>

<span class="n">randomX</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">randomY</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>

<span class="n">lags</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">jump</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;scaler&#39;</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">()),</span>
    <span class="p">(</span><span class="s1">&#39;lagger&#39;</span><span class="p">,</span> <span class="n">Lag</span><span class="p">(</span><span class="n">lags</span><span class="o">=</span><span class="n">lags</span><span class="p">,</span> <span class="n">jump</span><span class="o">=</span><span class="n">jump</span><span class="p">,</span> <span class="n">keep_contemporaneous_X</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="p">])</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">randomX</span><span class="p">,</span> <span class="n">randomY</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Below we confirm that the lagger object removes the correct number of rows corresponding to the lagged observations:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">randomX</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">lags</span> <span class="o">-</span> <span class="n">jump</span> <span class="o">==</span> <span class="n">pipe</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Real-life-example-dataset">Real-life example dataset<a class="anchor-link" href="#Real-life-example-dataset"> </a></h2><p>The function <a href="/gingado/utils.html#load_EURFX_data"><code>load_EURFX_data</code></a> is a helper function to download a test dataset containing real life data. This dataset was chosen due to the assumption that most users have at least an intuitive understanding of what a foreign exchange is: the price of changing one currency for the other. This example dataset does not imply this data is more or less relevant than others; it is used only for pedagogical purposes and also to provide an example source code for users on how such data can be downloaded and prepared, including with <code>gingado</code>'s <a href="/gingado/utils.html#Lag"><code>Lag</code></a> class.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_EURFX_data" class="doc_header"><code>load_EURFX_data</code><a href="https://github.com/dkgaraujo/gingado/tree/main/gingado/utils.py#L78" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_EURFX_data</code>(<strong><code>startYear</code></strong>=<em><code>2003</code></em>, <strong><code>lags</code></strong>=<em><code>1</code></em>, <strong><code>jump</code></strong>=<em><code>0</code></em>, <strong><code>keep_contemporaneous_X</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>Loads a real-life dataset for testing use cases.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">EUR_FX</span> <span class="o">=</span> <span class="n">load_EURFX_data</span><span class="p">()</span>

<span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">EUR_FX</span><span class="p">)</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
<span class="k">assert</span> <span class="n">EUR_FX</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="k">assert</span> <span class="n">EUR_FX</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>

<span class="n">EUR_FX</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AUD</th>
      <th>BRL</th>
      <th>CAD</th>
      <th>CHF</th>
      <th>GBP</th>
      <th>JPY</th>
      <th>SGD</th>
      <th>USD</th>
      <th>AUD_lag_1</th>
      <th>BRL_lag_1</th>
      <th>CAD_lag_1</th>
      <th>CHF_lag_1</th>
      <th>GBP_lag_1</th>
      <th>JPY_lag_1</th>
      <th>SGD_lag_1</th>
      <th>USD_lag_1</th>
    </tr>
    <tr>
      <th>TIME_PERIOD</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2003-01-03</th>
      <td>1.8440</td>
      <td>3.6112</td>
      <td>1.6264</td>
      <td>1.4555</td>
      <td>0.65000</td>
      <td>124.56</td>
      <td>1.8132</td>
      <td>1.0392</td>
      <td>1.8554</td>
      <td>3.6770</td>
      <td>1.6422</td>
      <td>1.4528</td>
      <td>0.65200</td>
      <td>124.40</td>
      <td>1.8188</td>
      <td>1.0446</td>
    </tr>
    <tr>
      <th>2003-01-06</th>
      <td>1.8281</td>
      <td>3.5145</td>
      <td>1.6383</td>
      <td>1.4563</td>
      <td>0.64950</td>
      <td>124.40</td>
      <td>1.8210</td>
      <td>1.0488</td>
      <td>1.8440</td>
      <td>3.6112</td>
      <td>1.6264</td>
      <td>1.4555</td>
      <td>0.65000</td>
      <td>124.56</td>
      <td>1.8132</td>
      <td>1.0392</td>
    </tr>
    <tr>
      <th>2003-01-07</th>
      <td>1.8160</td>
      <td>3.5139</td>
      <td>1.6257</td>
      <td>1.4565</td>
      <td>0.64960</td>
      <td>124.82</td>
      <td>1.8155</td>
      <td>1.0425</td>
      <td>1.8281</td>
      <td>3.5145</td>
      <td>1.6383</td>
      <td>1.4563</td>
      <td>0.64950</td>
      <td>124.40</td>
      <td>1.8210</td>
      <td>1.0488</td>
    </tr>
    <tr>
      <th>2003-01-08</th>
      <td>1.8132</td>
      <td>3.4405</td>
      <td>1.6231</td>
      <td>1.4586</td>
      <td>0.64950</td>
      <td>124.90</td>
      <td>1.8102</td>
      <td>1.0377</td>
      <td>1.8160</td>
      <td>3.5139</td>
      <td>1.6257</td>
      <td>1.4565</td>
      <td>0.64960</td>
      <td>124.82</td>
      <td>1.8155</td>
      <td>1.0425</td>
    </tr>
    <tr>
      <th>2003-01-09</th>
      <td>1.8172</td>
      <td>3.4915</td>
      <td>1.6371</td>
      <td>1.4597</td>
      <td>0.65300</td>
      <td>125.16</td>
      <td>1.8244</td>
      <td>1.0507</td>
      <td>1.8132</td>
      <td>3.4405</td>
      <td>1.6231</td>
      <td>1.4586</td>
      <td>0.64950</td>
      <td>124.90</td>
      <td>1.8102</td>
      <td>1.0377</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2022-05-23</th>
      <td>1.4982</td>
      <td>5.1623</td>
      <td>1.3626</td>
      <td>1.0310</td>
      <td>0.84783</td>
      <td>136.05</td>
      <td>1.4639</td>
      <td>1.0659</td>
      <td>1.4980</td>
      <td>5.1989</td>
      <td>1.3526</td>
      <td>1.0280</td>
      <td>0.84820</td>
      <td>135.34</td>
      <td>1.4588</td>
      <td>1.0577</td>
    </tr>
    <tr>
      <th>2022-05-24</th>
      <td>1.5152</td>
      <td>5.1793</td>
      <td>1.3714</td>
      <td>1.0334</td>
      <td>0.85750</td>
      <td>136.49</td>
      <td>1.4722</td>
      <td>1.0720</td>
      <td>1.4982</td>
      <td>5.1623</td>
      <td>1.3626</td>
      <td>1.0310</td>
      <td>0.84783</td>
      <td>136.05</td>
      <td>1.4639</td>
      <td>1.0659</td>
    </tr>
    <tr>
      <th>2022-05-25</th>
      <td>1.5126</td>
      <td>5.1736</td>
      <td>1.3720</td>
      <td>1.0269</td>
      <td>0.85295</td>
      <td>135.34</td>
      <td>1.4676</td>
      <td>1.0656</td>
      <td>1.5152</td>
      <td>5.1793</td>
      <td>1.3714</td>
      <td>1.0334</td>
      <td>0.85750</td>
      <td>136.49</td>
      <td>1.4722</td>
      <td>1.0720</td>
    </tr>
    <tr>
      <th>2022-05-26</th>
      <td>1.5110</td>
      <td>5.1741</td>
      <td>1.3715</td>
      <td>1.0283</td>
      <td>0.85073</td>
      <td>135.95</td>
      <td>1.4709</td>
      <td>1.0697</td>
      <td>1.5126</td>
      <td>5.1736</td>
      <td>1.3720</td>
      <td>1.0269</td>
      <td>0.85295</td>
      <td>135.34</td>
      <td>1.4676</td>
      <td>1.0656</td>
    </tr>
    <tr>
      <th>2022-05-27</th>
      <td>1.4995</td>
      <td>5.0959</td>
      <td>1.3661</td>
      <td>1.0258</td>
      <td>0.84875</td>
      <td>136.05</td>
      <td>1.4679</td>
      <td>1.0722</td>
      <td>1.5110</td>
      <td>5.1741</td>
      <td>1.3715</td>
      <td>1.0283</td>
      <td>0.85073</td>
      <td>135.95</td>
      <td>1.4709</td>
      <td>1.0697</td>
    </tr>
  </tbody>
</table>
<p>4969 rows × 16 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

