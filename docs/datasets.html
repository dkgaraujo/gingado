---

title: Datasets for economic research


keywords: fastai
sidebar: home_sidebar

summary: "Functions to load real or simulated datasets that are relevant for economic and financial models"
description: "Functions to load real or simulated datasets that are relevant for economic and financial models"
nb_path: "00_datasets.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_datasets.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The functions that load datasets output the variables necessary to run and test economic models - machine learning or not.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Real-datasets">Real datasets<a class="anchor-link" href="#Real-datasets"> </a></h2><h3 id="Barro-and-Lee,-1994">Barro and Lee, 1994<a class="anchor-link" href="#Barro-and-Lee,-1994"> </a></h3><p>Robert Barro and Jong-Wha Lee published in 1994 their <a href="https://www.sciencedirect.com/science/article/pii/0167223194900027">cross-country study on sources of economic (GDP) growth</a>. Their dataset has been used over time by other economists, such as by <a href="https://onlinelibrary.wiley.com/doi/abs/10.3982/ECTA17842">Domenico Giannone, Michele Lenza and Giorgio Primicieri (2021)</a>. This function uses the version available in their <a href="https://onlinelibrary.wiley.com/doi/abs/10.3982/ECTA17842">online annex</a>. In that paper, this dataset corresponds to what the authors call "macro2".</p>
<p>The original data, along with more information on the variables, can be found in <a href="http://www2.nber.org/pub/barro.lee/">this NBER website</a>. A very helpful codebook is found <a href="https://github.com/bizmaercq/Do-Poor-Countries-Grow-Faster-than-Rich-Countries/blob/master/data/Codebook.txt">in this repo</a>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_BarroLee_1994" class="doc_header"><code>load_BarroLee_1994</code><a href="https://github.com/dkgaraujo/gingado/tree/main/gingado/datasets.py#L9" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_BarroLee_1994</code>()</p>
</blockquote>
<p>Dataset used in R Barro and J-W Lee's <em>Sources of Economic Growth</em> (1994)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Simulated-datasets">Simulated datasets<a class="anchor-link" href="#Simulated-datasets"> </a></h2><p>{% include note.html content='All of the functions creating simulated datasets have a parameter <code>random_state</code> that allow for reproducible random numbers.' %}</p>
<h3 id="Causal-relationships">Causal relationships<a class="anchor-link" href="#Causal-relationships"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.utils</span> <span class="kn">import</span> <span class="n">check_random_state</span>
<span class="n">generator</span> <span class="o">=</span> <span class="n">check_random_state</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">generator</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>RandomState(MT19937) at 0x147D87940</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="make_causal_effect" class="doc_header"><code>make_causal_effect</code><a href="https://github.com/dkgaraujo/gingado/tree/main/gingado/datasets.py#L23" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>make_causal_effect</code>(<strong><code>n_samples</code></strong>:<code>int</code>=<em><code>100</code></em>, <strong><code>n_features</code></strong>:<code>int</code>=<em><code>100</code></em>, <strong><code>pretreatment_outcome</code></strong>=<em><code>&lt;lambda&gt;</code></em>, <strong><code>treatment_propensity</code></strong>=<em><code>&lt;lambda&gt;</code></em>, <strong><code>treatment_assignment</code></strong>=<em><code>&lt;lambda&gt;</code></em>, <strong><code>treatment</code></strong>=<em><code>&lt;lambda&gt;</code></em>, <strong><code>treatment_effect</code></strong>=<em><code>&lt;lambda&gt;</code></em>, <strong><code>bias</code></strong>:<code>float</code>=<em><code>0</code></em>, <strong><code>noise</code></strong>=<em><code>0</code></em>, <strong><code>random_state</code></strong>=<em><code>None</code></em>, <strong><code>return_propensity</code></strong>=<em><code>False</code></em>, <strong><code>return_assignment</code></strong>=<em><code>False</code></em>, <strong><code>return_treatment_value</code></strong>=<em><code>False</code></em>, <strong><code>return_treatment_effect</code></strong>=<em><code>True</code></em>, <strong><code>return_pretreatment_y</code></strong>=<em><code>False</code></em>, <strong><code>return_as_dict</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Simulated dataset with causal effects from treatment</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="/gingado/datasets.html#make_causal_effect"><code>make_causal_effect</code></a> creates a dataset for when the question of interest is related to the causal effects of a treatment. For example, for a simulated dataset, we can check that $y$ corresponds to the sum of the treatment effects plus the component that does not depend on the treatment:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> <span class="n">causal_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">n_samples</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>
    <span class="n">n_features</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">return_propensity</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_treatment_effect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
    <span class="n">return_pretreatment_y</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
    <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

 <span class="k">assert</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">causal_sim</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">causal_sim</span><span class="p">[</span><span class="s1">&#39;pretreatment_y&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">causal_sim</span><span class="p">[</span><span class="s1">&#39;treatment_effect&#39;</span><span class="p">],</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">13</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Pre-treatment-outcome">Pre-treatment outcome<a class="anchor-link" href="#Pre-treatment-outcome"> </a></h4><p>The pre-treatment outcome $Y_i|X_i$ (the part of the outcome variable that is not dependent on the treatment) might be defined by the user. This corresponds to the value of the outcome for any untreated observations. The function should always take at least two arguments: <code>X</code> and <code>bias</code>, even if one of them is unused; <code>bias</code> is the constant. The argument is zero by default but can be set by the user to be another value.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">causal_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">bias</span><span class="o">=</span><span class="mf">0.123</span><span class="p">,</span>
    <span class="n">pretreatment_outcome</span><span class="o">=</span><span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">bias</span><span class="p">:</span> <span class="n">bias</span><span class="p">,</span>
    <span class="n">return_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">causal_sim</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">][</span><span class="n">causal_sim</span><span class="p">[</span><span class="s1">&#39;treatment_assignment&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.123</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If the outcome depends on specific columns of $X$, this can be implemented as shown below.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">causal_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">pretreatment_outcome</span><span class="o">=</span><span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">bias</span><span class="p">:</span> <span class="n">X</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">X</span><span class="p">[:,</span><span class="mi">2</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">X</span><span class="p">[:,</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">X</span><span class="p">[:,</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="n">bias</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And of course, the outcome might also have a random component.</p>
<p>In these cases (and in other parts of this function), when the user wants to use the same random number generator as the other parts of the function, the function must have an argment <code>rng</code> for the NumPy random number generator used in other parts of the function.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">causal_sim_1</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">pretreatment_outcome</span><span class="o">=</span><span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">bias</span><span class="p">,</span> <span class="n">rng</span><span class="p">:</span> <span class="n">X</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">X</span><span class="p">[:,</span><span class="mi">2</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">X</span><span class="p">[:,</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">X</span><span class="p">[:,</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="n">bias</span> <span class="o">+</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
    <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
    <span class="n">return_pretreatment_y</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="n">causal_sim_2</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">pretreatment_outcome</span><span class="o">=</span><span class="k">lambda</span> <span class="n">X</span><span class="p">,</span> <span class="n">bias</span><span class="p">,</span> <span class="n">rng</span><span class="p">:</span> <span class="n">X</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">X</span><span class="p">[:,</span><span class="mi">2</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">X</span><span class="p">[:,</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">X</span><span class="p">[:,</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="n">bias</span> <span class="o">+</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
    <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
    <span class="n">return_pretreatment_y</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">causal_sim_1</span><span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">causal_sim_2</span><span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">causal_sim_1</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">causal_sim_2</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">causal_sim_1</span><span class="p">[</span><span class="s1">&#39;pretreatment_y&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">causal_sim_2</span><span class="p">[</span><span class="s1">&#39;pretreatment_y&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Treatment-propensity">Treatment propensity<a class="anchor-link" href="#Treatment-propensity"> </a></h4><p>The treatment propensity of observations may all be the same, in which case <code>treatment_propensity</code> is a floating number between 0 and 1.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">same_propensity_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">n_samples</span><span class="o">=</span><span class="mi">485</span><span class="p">,</span>
    <span class="n">treatment_propensity</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
    <span class="n">return_propensity</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">same_propensity_sim</span><span class="p">[</span><span class="s1">&#39;propensity&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mf">0.3</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">same_propensity_sim</span><span class="p">[</span><span class="s1">&#39;propensity&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">485</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Or it might depend on the observation's covariates, with the user passing a function with an argument 'X'.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">heterogenous_propensities_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">n_samples</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">treatment_propensity</span><span class="o">=</span><span class="k">lambda</span> <span class="n">X</span><span class="p">:</span> <span class="mf">0.3</span> <span class="o">+</span> <span class="p">(</span><span class="n">X</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.2</span><span class="p">,</span>
    <span class="n">return_propensity</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Heterogenously distributed propensities&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Propensity&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;No of observations&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">heterogenous_propensities_sim</span><span class="p">[</span><span class="s1">&#39;propensity&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The propensity can also be randomly allocated, together with covariate dependence or not. Note that even if the propensity is completely random and does not depend on covariates, the function must still use the argument <code>X</code> to calculate a random vector with the appropriate size.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">random_propensities_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">n_samples</span><span class="o">=</span><span class="mi">50000</span><span class="p">,</span>
    <span class="n">treatment_propensity</span><span class="o">=</span><span class="k">lambda</span> <span class="n">X</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
    <span class="n">return_propensity</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Randomly distributed propensities&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Propensity&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;No of observations&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">random_propensities_sim</span><span class="p">[</span><span class="s1">&#39;propensity&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Treatment-assignment">Treatment assignment<a class="anchor-link" href="#Treatment-assignment"> </a></h4><p>As seen above, every observation has a given treatment propensity - the chance that they are treated. Users can define how this propensity translates into actual treatment with the argument <code>treatment_assignment</code>. This argument takes a function, which must have an argument called <code>propensity</code>.</p>
<p>The default value for this argument is a function returning 1s with probability <code>propensity</code> and 0s otherwise. Any other function should always return either 0s or 1s for the data simulator to work as expected.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">causal_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">treatment_assignment</span><span class="o">=</span><span class="k">lambda</span> <span class="n">propensity</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">binomial</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">propensity</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>While the case above is likely to be the most useful in practice, this argument accepts more complex relationships between an observation's propensity and the actual treatment assignment.</p>
<p>For example, if treatment is subject to rationing, then one could simulate data with 10 observations where only the samples with the highest (say, 3) propensity scores get treated, as below:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rationed_treatment_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">n_samples</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">treatment_propensity</span><span class="o">=</span><span class="k">lambda</span> <span class="n">X</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
    <span class="n">treatment_assignment</span><span class="o">=</span><span class="k">lambda</span> <span class="n">propensity</span><span class="p">:</span> <span class="n">propensity</span> <span class="o">&gt;=</span> <span class="n">propensity</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">propensity</span><span class="p">)][</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span>
    <span class="n">return_propensity</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rationed_treatment</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">rationed_treatment_sim</span><span class="p">[</span><span class="s1">&#39;propensity&#39;</span><span class="p">],</span> <span class="n">rationed_treatment_sim</span><span class="p">[</span><span class="s1">&#39;treatment_assignment&#39;</span><span class="p">])),</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;propensity&#39;</span><span class="p">,</span> <span class="s1">&#39;assignment&#39;</span><span class="p">]</span>
    <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rationed_treatment</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;propensity&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>propensity</th>
      <th>assignment</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.055945</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.152376</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.193666</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.207776</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.209257</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.359682</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.397974</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.575016</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.645311</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.847153</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Treatment-value">Treatment value<a class="anchor-link" href="#Treatment-value"> </a></h4><p>The <code>treatment</code> argument indicates the magnitude of the treatment for each observation assigned for treatment. Its value is always a function that must have an argument called <code>assignment</code>, as in the first example below.</p>
<p>In the simplest case, the treatment is a binary variable indicating whether or not a variable was treated. In other words, the treatment is the same as the assignment, as in the default value.</p>
<p>But users can also simulate data with heterogenous treatment, conditional on assignment. This is done by including a pararemeter <code>X</code> in the function, as shown in the second example below.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">binary_treatment_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">n_samples</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
    <span class="n">treatment</span><span class="o">=</span><span class="k">lambda</span> <span class="n">assignment</span><span class="p">:</span> <span class="n">assignment</span><span class="p">,</span>
    <span class="n">return_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_treatment_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="k">assert</span> <span class="nb">sum</span><span class="p">(</span><span class="n">binary_treatment_sim</span><span class="p">[</span><span class="s1">&#39;treatment_assignment&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">binary_treatment_sim</span><span class="p">[</span><span class="s1">&#39;treatment_value&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Heterogenous treatments may occur in settings where treatment intensity, conditional on assignment, varies across observations. Please note the following:</p>
<ul>
<li>the heterogenous treatment amount may or may not depend on covariates, but either way, if treatment values are heterogenous, then <code>X</code> needs to be an argument of the function passed to <code>treatment</code>, if nothing else to make sure the shapes match; and</li>
<li>if treatments are heterogenous, then it is important to multiply the treatment value with the <code>assignment</code> argument to ensure that observations that are not assigned to be treated are indeed not treated (the function will return an <code>AssertionError</code> otherwise).</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hetereogenous_treatment_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
    <span class="n">n_samples</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
    <span class="n">treatment</span><span class="o">=</span><span class="k">lambda</span> <span class="n">assignment</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">assignment</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
    <span class="n">return_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_treatment_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In contrast to the function above, in the chunk below we function <a href="/gingado/datasets.html#make_causal_effect"><code>make_causal_effect</code></a> fails because a treatment value is also assigned to observations that were not assigned for treatment.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_fail</span><span class="p">(</span>
    <span class="n">make_causal_effect</span><span class="p">,</span> 
    <span class="n">kwargs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">treatment</span><span class="o">=</span><span class="k">lambda</span> <span class="n">assignment</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">assignment</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Treatment-effect">Treatment effect<a class="anchor-link" href="#Treatment-effect"> </a></h4><p>The treatment effect can be homogenous, ie, is doesn't depend on any other characteristic of the individual observations (in other words, does not depend on $X_i$), or heterogenous (where the treatment effect on $Y_i$ does depend on each observation's $X_i$). This can be done by specifying the causal relationship through a lambda function, as below:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">homogenous_effects_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
        <span class="n">treatment_effect</span><span class="o">=</span><span class="k">lambda</span> <span class="n">treatment_value</span><span class="p">:</span> <span class="n">treatment_value</span><span class="p">,</span>
        <span class="n">return_treatment_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="k">assert</span> <span class="p">(</span><span class="n">homogenous_effects_sim</span><span class="p">[</span><span class="s1">&#39;treatment_effect&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">homogenous_effects_sim</span><span class="p">[</span><span class="s1">&#39;treatment_value&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

<span class="n">heterogenous_effects_sim</span> <span class="o">=</span> <span class="n">make_causal_effect</span><span class="p">(</span>
        <span class="n">treatment_effect</span><span class="o">=</span><span class="k">lambda</span> <span class="n">treatment_value</span><span class="p">,</span> <span class="n">X</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">X</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">treatment_value</span><span class="p">,</span>
        <span class="n">return_treatment_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">return_as_dict</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="k">assert</span> <span class="p">(</span><span class="n">heterogenous_effects_sim</span><span class="p">[</span><span class="s1">&#39;treatment_effect&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">heterogenous_effects_sim</span><span class="p">[</span><span class="s1">&#39;treatment_value&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="References">References<a class="anchor-link" href="#References"> </a></h2><p>Barro, R and J-W Lee (1994): "Sources of economic growth", Carnegie-Rochester Conference Series on Public Policy, 40, p. 1-46.</p>
<p>Giannone, D, M Lenza, G Primiceri (2021): "Economic predictions with big data: the illusion of sparsity", Econometrica, 89, 5, p. 2409-2437.</p>

</div>
</div>
</div>
</div>


